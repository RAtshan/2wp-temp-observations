target_default: 1_wqp_inventory

packages:
  - dataRetrieval
  - yaml
  - maps
  - ggplot2
  - ggthemes
  
sources:
  - 1_wqp_inventory/src/get_wqp_sites.R
  - 1_wqp_inventory/src/summarize_sites.R
  
targets:
  1_wqp_inventory:
    depends:
      - wqp_want_sites
      - 1_wqp_inventory/doc/state_lake_site_summary.png
      - 1_wqp_inventory/doc/state_stream_site_summary.png
      
# -- get list of wqp sites with parameters of interest -- #

  wqp_pull_parameters:
    command: yaml.load_file('1_wqp_inventory/cfg/wqp_pull_params.yml')

  wqp_want_sites:
    command: get_wqp_sites(wqp_pull_parameters)
    
  state_lake_site_summary:
    command: summarize_sites(wqp_want_sites, I('lake|reservoir|impound'))
    
  state_stream_site_summary:
    command: summarize_sites(wqp_want_sites, I('stream|river'))
    
  1_wqp_inventory/doc/state_lake_site_summary.png:
    command: plot_summary(state_lake_site_summary, target_name)
    
  1_wqp_inventory/doc/state_stream_site_summary.png:
    command: plot_summary(state_stream_site_summary, target_name)
    
  wqp_want_variables:
    command: wqp_pull_parameters[[I('characteristicName')]]
    
# -- compute wants -- #
